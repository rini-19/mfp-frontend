(this["webpackJsonpmfp-frontend"]=this["webpackJsonpmfp-frontend"]||[]).push([[0],{48:function(e,t,n){e.exports=n(90)},53:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(28),l=n.n(r),s=n(18),c=(n(53),n(5)),u=n(6),d=n(7),m=n(8),g=n(11),p=n(2),h=n.n(p),f=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).loadUser=function(e){a.setState({users:e}),console.log("user array loaded",a.state.users)},a.state={users:[{id:null,name:"",email:"",phone:null}]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("LoggedIn");console.log("is logged in",t);var n=null;t&&(n=localStorage.getItem("token"),console.log(n)),fetch("/users",{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+n}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.loadUser(t)}))}},{key:"render",value:function(){var e=this.state.users;return console.log(e),o.a.createElement(p.Content,{title:"User Info"},o.a.createElement(p.Row,null,o.a.createElement(p.Col,{xs:12},o.a.createElement(p.Box,{noPadding:!0,customOptions:o.a.createElement(p.Inputs.Text,{size:"sm",buttonRight:o.a.createElement(p.Button,{iconClass:"fa-search"}),width:"130px",placeholder:"Search"})},o.a.createElement(p.SimpleTable,{columns:[{title:"User ID",data:"id"},{title:"User Name",data:"name"},{title:"Email",data:"email"},{title:"Phone",data:"phone"}],data:e})))))}}]),n}(a.Component),v=n(46),b=n(39),E=n(41),S=n(40);function j(){var e=Object(b.a)(["\n  padding: 1rem;\n\n  table {\n    border-spacing: 0;\n    border: 1px solid black;\n\n    tr {\n      :last-child {\n        td {\n          border-bottom: 0;\n        }\n      }\n    }\n\n    th,\n    td {\n      margin: 0;\n      padding: 0.5rem;\n      border-bottom: 1px solid black;\n      border-right: 1px solid black;\n\n      :last-child {\n        border-right: 0;\n      }\n    }\n  }\n"]);return j=function(){return e},e}var y=E.a.div(j());function C(e){var t=e.columns,n=e.data,a=Object(S.useTable)({columns:t,data:n}),r=a.getTableProps,l=a.getTableBodyProps,s=a.headerGroups,i=a.rows,c=a.prepareRow;return o.a.createElement("table",r(),o.a.createElement("thead",null,s.map((function(e){return o.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return o.a.createElement("th",e.getHeaderProps(),e.render("Header"))})))}))),o.a.createElement("tbody",l(),i.map((function(e,t){return c(e),o.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return o.a.createElement("td",e.getCellProps(),e.render("Cell"))})))}))))}var I=function(e){var t=e.user_id,n=void 0===t?null:t,r=e.client_id,l=void 0===r?null:r;console.log("client id",l);var s=Object(a.useState)([]),i=Object(v.a)(s,2),c=i[0],u=i[1];Object(a.useEffect)((function(){var e=!0,t=null;return localStorage.getItem("LoggedIn")&&(t=localStorage.getItem("token"),console.log(t)),fetch("/messages",{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({Uid:n})}).then((function(e){return e.json()})).then((function(t){e&&(u(t),console.log(t))})),function(){return e=!1}}),[]);var d=o.a.useMemo((function(){return[{Header:"Messages",columns:[{Header:"Message",accessor:"message"},{Header:"Timestamp",accessor:"sent_at"}]}]}),[]),m=o.a.useMemo((function(){return c}),[c]);return o.a.createElement(y,null,o.a.createElement(C,{columns:d,data:m}))},O=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).loadUser=function(e){var t={},n=[];e.forEach((function(e){t={id:e.id,name:e.name},n.push(t)})),a.setState({users:n}),console.log("user in loaduser",a.state.users),console.log(a.state.users[1].name)},a.state={users:[{id:null,name:""}]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=null;localStorage.getItem("LoggedIn")&&(t=localStorage.getItem("token"),console.log(t)),fetch("/users",{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.loadUser(t)}))}},{key:"render",value:function(){var e=this;if(this.state.users[1]){var t=this.state.users[1].name;console.log("user in render",t)}return o.a.createElement(p.Content,{title:"Messages",subTitle:"Getting started with adminlte-2-react",browserTitle:""},o.a.createElement(p.Row,null,o.a.createElement(p.Col,{xs:12},void 0===this.state.users?console.log(this.state.users):this.state.users.map((function(t,n){var a=t.id,r=t.name;return o.a.createElement(p.Box,{key:a,title:r,type:"primary",collapsable:!0,collapsed:!0},console.log("user",a),o.a.createElement(I,{user_id:a,client_id:e.props.clientID,len:e.state.users.length}))})))))}}]),n}(a.Component),w=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).loadServices=function(e){var t,n,o,r={};console.log("type of i",typeof i);var l=[];e.forEach((function(e){console.log(e),1===e.is_resolved?(t="success",n="resolved",o=e.resolved_at):(t="warning",n="not resolved",o=null),r={id:e.id,details:e.details,user:e.name,req_date:e.time_received,status:{type:t,text:n},res_date:o},l.push(r)})),a.setState({services:l})},a.state={services:[{id:null,details:"",user:"",req_date:"",status:{type:"",text:""},res_date:""}]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("LoggedIn");console.log("is logged in",t);var n=null;t&&(n=localStorage.getItem("token"),console.log(n)),fetch("/services",{method:"post",headers:{"Content-type":"application/json",Authorization:"Bearer "+n}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.loadServices(t)}))}},{key:"render",value:function(){var e=[{title:"Service ID",data:"id"},{title:"Service Details",data:"details"},{title:"User",data:"user"},{title:"Request Date",data:"req_date"},{title:"Status",data:"status",render:function(e){return o.a.createElement(p.Label,{type:e.type},e.text)}},{title:"Resolved At",data:"res_date"}],t=this.state.services;return o.a.createElement(p.Content,{title:"Service Request Info"},o.a.createElement(p.Row,null,o.a.createElement(p.Col,{xs:12},o.a.createElement(p.Box,{noPadding:!0,customOptions:o.a.createElement(p.Inputs.Text,{size:"sm",buttonRight:o.a.createElement(p.Button,{iconClass:"fa-search"}),width:"130px",placeholder:"Search"})},o.a.createElement(p.SimpleTable,{columns:e,data:t})))))}}]),n}(a.Component),k=p.Sidebar.Item,x=p.Sidebar.Header,D=p.Sidebar.UserPanel,N=p.Navbar.Entry,L=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).logout=function(){localStorage.clear(),a.props.history.replace("/")},a.state={},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("LoggedIn");console.log("is logged in",e);var t=null;e&&(t=localStorage.getItem("client"),console.log("client dash",t),this.props.updateClient(JSON.parse(t)))}},{key:"render",value:function(){return o.a.createElement(h.a,{title:["App","Name"],titleShort:["ap","na"],theme:"blue"},o.a.createElement(p.Navbar.Core,null,o.a.createElement(N,{icon:"fas-sign-out-alt",onClick:this.logout})),o.a.createElement(p.Sidebar.Core,null,o.a.createElement(D,{username:this.props.clientData.name,status:"status",imageUrl:"http://getdrawings.com/free-icon/my-profile-icon-67.png"}),o.a.createElement(x,{text:"Options",icon:"options-outline"}),o.a.createElement(k,{key:"users",text:"Users",to:"/client-users"}),o.a.createElement(k,{key:"messages",text:"Messages",to:"/client-messages"}),o.a.createElement(k,{key:"services",text:"Services",to:"/client-services"})),o.a.createElement(f,{path:"/client-users",clientID:this.props.clientData.id}),o.a.createElement(O,{path:"/client-messages",clientID:this.props.clientData.id}),o.a.createElement(w,{path:"/client-services",clientID:this.props.clientData.id}))}}]),n}(a.Component),P=Object(g.f)(L),_=(n(89),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onNameChange=function(e){a.setState({loginName:e.target.value})},a.onPasswordChange=function(e){a.setState({loginPassword:e.target.value})},a.onSubmitChange=function(){fetch("/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a.state.loginName,password:a.state.loginPassword})}).then((function(e){return e.json()})).then((function(e){e.id?(a.props.loadClient(e),a.props.history.replace("/dashboard")):console.log("login component",e)}))},a.state={loginName:"",loginPassword:""},a}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{id:"loginform"},o.a.createElement("h2",{id:"headerTitle"},"Login"),o.a.createElement("div",null,o.a.createElement("div",{className:"row"},o.a.createElement("label",null,"Username"),o.a.createElement("input",{onChange:this.onNameChange,type:"text",placeholder:"Enter username"})),o.a.createElement("div",{className:"row"},o.a.createElement("label",null,"Password"),o.a.createElement("input",{onChange:this.onPasswordChange,type:"password",placeholder:"Enter password"})),o.a.createElement("div",{id:"button",className:"row"},o.a.createElement("button",{onClick:this.onSubmitChange},"Login Now")),o.a.createElement("div",{id:"alternativeLogin"},o.a.createElement("label",null,"Or sign in with:"),o.a.createElement("div",{id:"iconGroup"},o.a.createElement("a",{href:"/",id:"facebookIcon"}),o.a.createElement("a",{href:"/",id:"twitterIcon"}),o.a.createElement("a",{href:"/",id:"googleIcon"})))))}}]),n}(a.Component)),U=Object(g.f)(_),B=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).loadClient=function(t){console.log(" in app",t);var n={id:t.client.id,name:t.client.name};e.updateClient(n),e.updateIsLoggedIn(!0),localStorage.setItem("LoggedIn",e.state.isLoggedIn),localStorage.setItem("token",t.token),localStorage.setItem("client",JSON.stringify(e.state.client))},e.updateClient=function(t){e.setState({client:t})},e.updateIsLoggedIn=function(t){e.setState({isLoggedIn:t})},e.state={isLoggedIn:!1,client:{id:null,name:""}},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return console.log("in app",this.state.client),o.a.createElement(g.c,null,o.a.createElement(g.a,{exact:!0,path:"/",render:function(t){return o.a.createElement(U,Object.assign({},t,{loadClient:e.loadClient}))}}),o.a.createElement(g.a,{exact:!0,path:"/dashboard",render:function(t){return o.a.createElement(P,Object.assign({},t,{updateClient:e.updateClient,clientData:e.state.client,isLoggedIn:e.state.client}))}}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(s.a,null,o.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.9808e832.chunk.js.map